import React, { useState, useEffect } from 'react';
import { 
  MapPin, 
  ExternalLink,
  ChevronRight,
  Navigation,
  Clock,
  ArrowRight,
  PlaneTakeoff,
  PlaneLanding,
  CloudSun,
  CloudRain,
  Thermometer,
  Wind,
  Coffee,
  Sparkles,
  Utensils,
  Camera,
  Home,
  ShoppingBag,
  Car,
  IceCream,
  Users,
  Music,
  BookOpen,
  Wine,
  Store,
  Navigation2
} from 'lucide-react';

const TripApp = () => {
  const [activeDay, setActiveDay] = useState(6); // é è¨­é¡¯ç¤º D7
  const customIconUrl = "https://duk.tw/t901oh.png";
  const headerImageUrl = "https://duk.tw/S2PEwV.png";

  useEffect(() => {
    const link = document.querySelector("link[rel*='icon']") || document.createElement('link');
    link.type = 'image/png';
    link.rel = 'shortcut icon';
    link.href = customIconUrl;
    document.getElementsByTagName('head')[0].appendChild(link);
    document.title = "æ²–ç¹©å®¶æ—æ—…è¡Œ 2026";
  }, []);

  const openMap = (url) => {
    if (!url) return;
    window.open(url, '_blank');
  };

  // å®šç¾©é¡å‹å°æ‡‰çš„æ¨£å¼èˆ‡åœ–ç¤º
  const getTagStyle = (tag) => {
    const styles = {
      'Accommodation': { bg: 'bg-indigo-50', text: 'text-indigo-600', border: 'border-indigo-100', dot: 'bg-indigo-500', btn: 'bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white', icon: <Home size={12} /> },
      'Coffee': { bg: 'bg-amber-50', text: 'text-amber-700', border: 'border-amber-100', dot: 'bg-amber-600', btn: 'bg-amber-50 text-amber-700 hover:bg-amber-700 hover:text-white', icon: <Coffee size={12} /> },
      'Activity': { bg: 'bg-purple-50', text: 'text-purple-600', border: 'border-purple-100', dot: 'bg-purple-500', btn: 'bg-purple-50 text-purple-600 hover:bg-purple-600 hover:text-white', icon: <Sparkles size={12} /> },
      'Lunch': { bg: 'bg-emerald-50', text: 'text-emerald-600', border: 'border-emerald-100', dot: 'bg-emerald-500', btn: 'bg-emerald-50 text-emerald-600 hover:bg-emerald-600 hover:text-white', icon: <Utensils size={12} /> },
      'Dinner': { bg: 'bg-rose-50', text: 'text-rose-600', border: 'border-rose-100', dot: 'bg-rose-500', btn: 'bg-rose-50 text-rose-600 hover:bg-rose-600 hover:text-white', icon: <Utensils size={12} /> },
      'Sightseeing': { bg: 'bg-sky-50', text: 'text-sky-600', border: 'border-sky-100', dot: 'bg-sky-500', btn: 'bg-sky-50 text-sky-600 hover:bg-sky-600 hover:text-white', icon: <Camera size={12} /> },
      'Shopping': { bg: 'bg-pink-50', text: 'text-pink-600', border: 'border-pink-100', dot: 'bg-pink-500', btn: 'bg-pink-50 text-pink-600 hover:bg-pink-600 hover:text-white', icon: <ShoppingBag size={12} /> },
      'Transport': { bg: 'bg-slate-100', text: 'text-slate-600', border: 'border-slate-200', dot: 'bg-slate-500', btn: 'bg-slate-100 text-slate-600 hover:bg-slate-600 hover:text-white', icon: <Car size={12} /> },
      'Dessert': { bg: 'bg-cyan-50', text: 'text-cyan-600', border: 'border-cyan-100', dot: 'bg-cyan-500', btn: 'bg-cyan-50 text-cyan-600 hover:bg-cyan-600 hover:text-white', icon: <IceCream size={12} /> },
      'Live': { bg: 'bg-orange-50', text: 'text-orange-600', border: 'border-orange-100', dot: 'bg-orange-500', btn: 'bg-orange-50 text-orange-600 hover:bg-orange-600 hover:text-white', icon: <Music size={12} /> },
      'Default': { bg: 'bg-teal-50', text: 'text-teal-600', border: 'border-teal-100', dot: 'bg-teal-500', btn: 'bg-teal-50 text-teal-600 hover:bg-teal-600 hover:text-white', icon: <MapPin size={12} /> }
    };
    return styles[tag] || styles['Default'];
  };

  const schedule = [
    {
      day: 1,
      date: "2026.2.11 Wed",
      navDate: "2.11",
      title: "å‡ºç™¼èˆ‡åŒ—ä¸Š",
      location: "æœ¬å³¶åŒ—éƒ¨",
      weather: { temp: "15Â°C - 20Â°C", desc: "å¤šé›²æ™‚æ™´", rain: "10%" },
      events: [
        { type: "flight", time: "13:15", title: "JX302 æ˜Ÿå®‡èˆªç©º", flightInfo: { from: "RMQ å°ä¸­", to: "OKA é‚£éœ¸", depTime: "13:15", arrTime: "15:45", terminal: "Terminal 2" }, emoji: "âœˆï¸" },
        { type: "transport", tag: "Transport", time: "16:30", title: "ç§Ÿè»Šè‡ªé§•å‰å¾€åŒ—éƒ¨", desc: "è»Šç¨‹ç´„ 90 åˆ†é˜ã€‚é€”ä¸­åœé åè­·å¤§å‹è¶…å¸‚æ¡è²·ã€‚", isList: true, options: [{ name: "MaxValu Nago", url: "https://maps.app.goo.gl/Q9YRqoaTqJ4RHQP17" }, { name: "AEON åè­·åº—", url: "https://maps.app.goo.gl/3jQnuMW6A5W65HPr5" }, { name: "BIG Express Nago", url: "https://maps.app.goo.gl/cNye5wNq98zPdd758" }, { name: "MEGA å”å‰è¨¶å¾· åè­·åº—", url: "https://maps.app.goo.gl/6kk5yg851ssjntxh9" }], emoji: "ğŸš—" },
        { type: "hotel", tag: "Accommodation", title: "YAWN YARD", desc: "æœ¬å³¶åŒ—éƒ¨å°é›¢å³¶æµ·å²¸ Villaã€‚å…©æ™šå››äººæˆ¿å·²ä»˜æ¸… (Â¥256,000 å«æ—©)ã€‚", location: "https://maps.app.goo.gl/tCDd1UTfRy5gvie69", emoji: "ğŸ¡" },
        { type: "food", tag: "Dinner", title: "ã‚ããƒ¼è±šã¨ sushi", desc: "å³¶å±…é…’å±‹ ã¾ãƒ¼ã•ã£ã•ãƒ¼ã€‚ç§»å‹•æ—¥è¼ƒç´¯ï¼Œèµ°è·¯å¯åˆ°å°±å¥½ã€‚", location: "https://maps.app.goo.gl/BTnUfot7qyzg5UMA8", emoji: "ğŸ£" }
      ]
    },
    {
      day: 2,
      date: "2026.2.12 Thu",
      navDate: "2.12",
      title: "å¤å®‡åˆ©å³¶èˆ‡æ°´æ—é¤¨",
      location: "æœ¬éƒ¨ç”º/å¤å®‡åˆ©å³¶",
      weather: { temp: "16Â°C - 21Â°C", desc: "æ™´æœ—", rain: "0%" },
      events: [
        { type: "food", tag: "Morning", title: "æ—©é¤ï¼šé£¯åº—æä¾›", emoji: "ğŸ³" },
        { type: "sightseeing", tag: "Sightseeing", title: "å¤å®‡åˆ©å³¶", desc: "å¿ƒå½¢å²©ã€å¤å®‡åˆ©å¤§æ©‹é–‹è»Šæ•£ç­–ã€‚", location: "https://maps.app.goo.gl/ExgJYh4iPcAQxW266", emoji: "ğŸŒŠ" },
        { type: "food", tag: "Lunch", title: "KOURI SHRIMP", desc: "ç¶“å…¸å¤å®‡åˆ©è¦è¦é£¯ã€‚", location: "https://maps.app.goo.gl/ExgJYh4iPcAQxW266", emoji: "ğŸ¤" },
        { type: "sightseeing", tag: "Sightseeing", title: "æ²–ç¸„ç¾ã‚‰æµ·æ°´æ—é¤¨", desc: "è§€è³é»‘æ½®ä¹‹æµ·å¤§æ°´æ§½ã€‚", location: "https://maps.app.goo.gl/BA8Uh2tWDVVML8R27", emoji: "ğŸ¬" },
        { type: "sightseeing", tag: "Sightseeing", title: "å‚™ç€¨ç¦æœ¨æ—é“", desc: "æ‚ é–’æ•£æ­¥ï¼Œäº«å—ç¶ æ„éš§é“ã€‚", location: "https://maps.app.goo.gl/Uyd5tvJQGkqLXEZU8", emoji: "ğŸŒ²" },
        { type: "food", tag: "Dinner", title: "æ™šé¤æ¨è–¦", isCategoryList: true, categories: [{ name: "æœ¬éƒ¨å€åŸŸ", items: [{ name: "æµ·é‚¦ä¸¸", url: "https://maps.app.goo.gl/6p6Z8Vv6L5v6v6v6v" }] }, { name: "åè­·å€åŸŸ", items: [{ name: "æ¾ã®å¤æ°‘å®¶", url: "" }, { name: "é‰„æ¿ç‡’ æœæ—¥", url: "" }, { name: "é£Ÿå ‚ãƒšãƒªã‚«ãƒ", url: "" }, { name: "é¤å»³ ãµã‚Šã£ã±ãƒ¼", url: "" }, { name: "å³¶è±¬ä¸ƒè¼ªç‡’è‚‰ æ»¿å‘³", url: "" }] }, { name: "å¤å®‡åˆ©å³¶", items: [{ name: "OCTO Grill", url: "" }, { name: "L LOTA", url: "" }] }], emoji: "ğŸ±" },
        { type: "hotel", tag: "Accommodation", title: "YAWN YARD", desc: "çºŒä½ç¬¬äºŒæ™š", location: "https://maps.app.goo.gl/tCDd1UTfRy5gvie69", emoji: "ğŸ¡" }
      ]
    },
    {
      day: 3,
      date: "2026.2.13 Fri",
      navDate: "2.13",
      title: "å¾€ä¸­éƒ¨ç§»å‹•",
      location: "è®€è°·/åŒ—è°·",
      weather: { temp: "15Â°C - 19Â°C", desc: "å±€éƒ¨å¤šé›²", rain: "20%" },
      events: [
        { type: "food", tag: "Morning", title: "æ—©é¤ï¼šé£¯åº—æä¾›", emoji: "ğŸ³" },
        { type: "food", tag: "Coffee", title: "PÄ€RAMITÄ€Â·æ³¢ç¾…èœœ", location: "https://maps.app.goo.gl/sR3DJCHmpYRsMJF26", emoji: "â˜•" },
        { type: "food", tag: "Lunch", title: "å²¸æœ¬é£Ÿå ‚", desc: "ç¶“å…¸æ²–ç¹©éºµã€‚", location: "https://maps.app.goo.gl/Upi6cPkuKmmzr74t8", emoji: "ğŸœ" },
        { type: "food", tag: "Dessert", title: "Hawaiian Pancakes House Paanilani", desc: "å¿…åƒäººæ°£é¬†é¤…åº—ã€‚", location: "https://maps.app.goo.gl/FB6aZiTYGrM3KexKA", emoji: "ğŸ¥" },
        { type: "activity", tag: "Activity", title: "ç‰çƒç»ç’ƒè£½ä½œé«”é©—ï¼šæµ·é¢¨", desc: "è£½ä½œç¨ä¸€ç„¡äºŒçš„ç‰çƒç»ç’ƒæ¯ã€‚", location: "https://maps.app.goo.gl/3cWpKtu12Xa2SUMa9", emoji: "ğŸº" },
        { type: "hotel", tag: "Accommodation", title: "GLAMDAY STYLE HOTEL ï¼† RESORT OKINAWA YOMITAN", desc: "è®€è°·æ‘ã€‚å…©æˆ¿å…©æ™š (Â¥201,057 å«æ—©)ã€‚", location: "https://maps.app.goo.gl/u9xVyVhkCZMSZoAv6", emoji: "ğŸ¨" },
        { type: "sightseeing", tag: "Sightseeing", title: "ç¾åœ‹æ‘ Depot Island", desc: "æ¼«æ­¥ç¾å¼é¢¨æƒ…èˆ‡æµ·æ¿±æ—¥è½ã€‚", location: "https://maps.app.goo.gl/dZEbdSrYPqLs93La9", emoji: "ğŸ¡" },
        { type: "food", tag: "Dinner", title: "æ™šé¤é¸é …", isList: true, options: [{ name: "chimanois", url: "" }, { name: "å®®å¹³æ–™ç†åº—", url: "" }, { name: "oru.", url: "" }, { name: "PUB LOUNOME EMERALD", url: "" }], emoji: "ğŸ½ï¸" }
      ]
    },
    {
      day: 4,
      date: "2026.2.14 Sat",
      navDate: "2.14",
      title: "ä¸­éƒ¨æ¼«éŠèˆ‡è¡¨æ¼”",
      location: "è®€è°·/åŒ—è°·",
      weather: { temp: "17Â°C - 22Â°C", desc: "æ™´æ™‚å¤šé›²", rain: "10%" },
      events: [
        { type: "food", tag: "Morning", title: "æ—©é¤ï¼šé£¯åº—æä¾›", emoji: "ğŸ³" },
        { type: "food", tag: "Coffee", title: "BANTA CAFE", desc: "æ˜Ÿé‡é›†åœ˜ç¶“ç‡Ÿï¼Œæ¥µè‡´æµ·æ™¯å’–å•¡å»³ã€‚", location: "https://maps.app.goo.gl/rJhCiDWeXoKAvpjV6", emoji: "â˜•" },
        { type: "food", tag: "Lunch", title: "åˆé¤ï¼šå¡”å¯é£¯é¸é …", isList: true, options: [{ name: "King Tacos", url: "https://maps.app.goo.gl/GgGPo53wmeNRPicn7" }, { name: "Mexico", url: "https://maps.app.goo.gl/P75ehnohHMfEo5Rk8" }], emoji: "ğŸŒ®" },
        { type: "food", tag: "Coffee", title: "å¤–å¸¶å’–å•¡ï¼šè±†ãƒãƒ¬ãƒãƒ¬", desc: "ä¸–ç•Œçƒ˜è±†å¤§è³½äºè»åº—ã€‚", location: "https://maps.app.goo.gl/jCwDZ35g6WSVGogP9", emoji: "â˜•" },
        { type: "food", tag: "Dessert", title: "CAFUNÃ‰", desc: "ç‰¹è‰²æ‰‹å·¥å†°æ·‡æ·‹ã€‚", location: "https://maps.app.goo.gl/KjGkjyG1wz1XBd2H8", emoji: "ğŸ¨" },
        { type: "shopping", tag: "Shopping", title: "é€›è¡—æ™‚å…‰", isList: true, options: [{ name: "D&DEPARTMENT OKINAWA", url: "https://maps.app.goo.gl/wSpeieQ93jZzewfy6" }, { name: "AEON MALL Rycom", url: "https://maps.app.goo.gl/Qc6VTfQEQvvLeNwn9" }], emoji: "ğŸ›ï¸" },
        { type: "activity", tag: "Live", time: "18:00", title: "YOGEE NEW WAVES <HAKKA TOUR 2026>", desc: "æˆ‘å’Œå°è”¡çœ‹è¡¨æ¼”ï¼Œçœ‹å®Œå› AEON MALL æœƒåˆ", location: "https://maps.app.goo.gl/RjL6dPhNpCFtBTyb6", emoji: "ğŸ¸" },
        { type: "hotel", tag: "Accommodation", title: "GLAMDAY STYLE YOMITAN", desc: "çºŒä½ç¬¬äºŒæ™š", location: "https://maps.app.goo.gl/u9xVyVhkCZMSZoAv6", emoji: "ğŸ¨" }
      ]
    },
    {
      day: 5,
      date: "2026.2.15 Sun",
      navDate: "2.15",
      title: "å°å¹´å¤œï¼šè¿”å›é‚£éœ¸",
      location: "æµ¦æ·»/é‚£éœ¸",
      weather: { temp: "16Â°C - 20Â°C", desc: "çŸ­æš«é™£é›¨", rain: "40%" },
      events: [
        { type: "food", tag: "Lunch", title: "é›ãã°å±‹ã„ã—ããµãƒ¼", desc: "æ‹›ç‰Œé›æ¹¯æ‹‰éºµèˆ‡çƒ¤é›è‚‰ã€‚", location: "https://maps.app.goo.gl/gMHnW5mAHc8J9Wzg7", emoji: "ğŸœ" },
        { type: "sightseeing", tag: "Sightseeing", title: "æ¸¯å·å¤–äººä½å®…å€", desc: "ç¹½ç´›å°å±‹é¸ç‰©èˆ‡èšè½æ•£ç­–ã€‚", isList: true, options: [
          { name: "å®—åƒå ‚", url: "https://maps.app.goo.gl/TYnGjwyf2ivE4PzW7" }
        ], emoji: "ğŸ˜ï¸" },
        { type: "food", tag: "Coffee", title: "æ¸¯å·å’–å•¡æ™‚å…‰", desc: "åœ¨ç¾å¼å°å±‹æ°›åœä¸­äº«å—ç²¾å“å’–å•¡ã€‚", isList: true, options: [
          { name: "COFFEE SENTI", url: "https://maps.app.goo.gl/BJiVHQuZCaBkLojc6" },
          { name: "COFFEE STAND Ecke", url: "https://maps.app.goo.gl/U5taDUaUw661AHV78" }
        ], emoji: "â˜•" },
        { type: "shopping", tag: "Shopping", title: "Parco City", desc: "æµ¦æ·»å¤§å‹æµ·é‚Šè³¼ç‰©å•†åŸã€‚", location: "https://maps.app.goo.gl/bbKiG4isbkUkEQ9P6", emoji: "ğŸ¬" },
        { type: "shopping", tag: "Shopping", title: "COSTCO å¥½å¸‚å¤š æ²–ç¹©åº—", desc: "å—åŸå¸‚å…¨æ–°é–‹å¹•æ——è‰¦åº—ã€‚", location: "https://maps.app.goo.gl/nJRwrJztzjqJAXKB8", emoji: "ğŸ›’" },
        { type: "hotel", tag: "Accommodation", title: "The Royal Park Hotel Iconic Okinawa Ryukyu", desc: "é‚£éœ¸åœ‹éš›é€šä¸­å¿ƒä½ç½®ï¼Œå…©æ™šé è¨‚æˆåŠŸã€‚", location: "https://maps.app.goo.gl/bJLMxDUia8nZ6yix8", emoji: "ğŸ¨" },
        { type: "food", tag: "Dinner", title: "PASTAIONE OKINAWA", desc: "å°å¹´å¤œç²¾ç·»ç¾©å¤§åˆ©æ–™ç†ã€‚", location: "https://maps.app.goo.gl/EN9PhfMoc7bWxbaX9", emoji: "ğŸ" }
      ]
    },
    {
      day: 6,
      date: "2026.2.16 Mon",
      navDate: "2.16",
      title: "é™¤å¤•ï¼šé‚£éœ¸å¸‚å€",
      location: "é‚£éœ¸å¸‚",
      weather: { temp: "14Â°C - 18Â°C", desc: "é™°å¤©", rain: "20%" },
      events: [
        { type: "food", tag: "Lunch", title: "INDIGO çƒé¾éºµ", desc: "é‚£éœ¸å¸‚å€äººæ°£è‡ªå®¶è£½éºµçƒé¾éºµã€‚", location: "https://maps.app.goo.gl/zKtSxYkgnSbFsqSJ8", emoji: "ğŸœ" },
        { type: "shopping", tag: "Shopping", title: "çˆ¸åª½æ¨è–¦è¡Œç¨‹ï¼šSan-A é‚£éœ¸ Main Place", desc: "åè¨ˆç¨‹è»Šæˆ–å–®è»Œå‰å¾€ãŠã‚‚ã‚ã¾ã¡é§…ã€‚", location: "https://maps.app.goo.gl/vkCos72Cp8viXVJx8", emoji: "ğŸ¢" },
        { type: "food", tag: "Coffee", title: "YOGOL COFFEE ROASTERS", desc: "é‚£éœ¸å¸‚å€ç²¾ç·»è‡ªå®¶çƒ˜ç„™å’–å•¡ã€‚", location: "https://maps.app.goo.gl/Piy3iannmyurwUuC8", emoji: "â˜•" },
        { type: "shopping", tag: "Shopping", title: "æˆ‘çš„ç§æˆ¿é€›è¡—æ¸…å–®", isList: true, options: [
          { name: "é…’ LIQUID THE STORE", url: "https://maps.app.goo.gl/jF8PSBdtQWCuUM3e7" },
          { name: "é¸ç‰© nan*ne", url: "https://maps.app.goo.gl/AAj69uRNVntg1FwG6" },
          { name: "æ›¸åº— Bunko no Bunko", url: "https://maps.app.goo.gl/wWvRT9LU8FQ8hSKg6" },
          { name: "å™¨çš¿ GARB DOMINGO", url: "https://maps.app.goo.gl/t9gQcobiSH6uPy1S6" },
          { name: "å™¨çš¿ miyagiya", url: "https://maps.app.goo.gl/fxdE3SZyYcwtsR5T6" },
          { name: "å™¨çš¿ é™¶ãƒ»ã‚ˆã‹ã‚Šã‚ˆ", url: "https://maps.app.goo.gl/2r5xxjDSmwjCtutL6" },
          { name: "é›œè²¨ æ¾å°¾èŠ­å•†", url: "https://maps.app.goo.gl/g5CJpELNT2XTp6mJ7" }
        ], emoji: "ğŸ" },
        { type: "food", tag: "Dinner", title: "SHIKAKU", desc: "é˜¿å¤è±¬æ¶®æ¶®é‹åœçˆéå¹´ã€‚", location: "https://maps.app.goo.gl/nmPZJq6APHg5QPft7", emoji: "ğŸ²" }
      ]
    },
    {
      day: 7,
      date: "2026.2.17 Tue",
      navDate: "2.17",
      title: "åˆä¸€ï¼šå¸‚å€è‡ªç”±æ´»å‹•",
      location: "é‚£éœ¸/æ©Ÿå ´",
      weather: { temp: "15Â°C - 21Â°C", desc: "å¤šé›²æ™‚æ™´", rain: "10%" },
      events: [
        { type: "food", tag: "Lunch", title: "LITOR", desc: "çµåˆåœ¨åœ°é£Ÿæçš„ç²¾ç·»æ—©åˆé¤ã€‚", location: "https://maps.app.goo.gl/uxcJNWAyLuXmaQtJA", emoji: "ğŸ”" },
        { type: "food", tag: "Coffee", title: "HUU'S COFFEE", desc: "éš±èº«å··å¼„çš„ç²¾å“å’–å•¡åº—ã€‚", location: "https://maps.app.goo.gl/YNzxWoNTkXteuHM38", emoji: "â˜•" },
        { type: "sightseeing", tag: "Sightseeing", title: "ç¬¬ä¸€ç‰§å¿—å…¬è¨­å¸‚å ´", desc: "é‚£éœ¸çš„å»šæˆ¿ï¼Œæ„Ÿå—åœ¨åœ°å¸‚å ´æ°›åœã€‚", location: "https://maps.app.goo.gl/w85EsLSHAu42eA2x8", emoji: "ğŸŸ" },
        { type: "shopping", tag: "Shopping", title: "RYUBO ç™¾è²¨", desc: "æ²–ç¹©å”¯ä¸€ç™¾è²¨å…¬å¸ï¼Œæœ€å¾Œè£œè²¨èˆ‡æ¡è²·ä¼´æ‰‹ç¦®ã€‚", location: "https://maps.app.goo.gl/23JXksTyaWHbxXcz6", emoji: "ğŸ›ï¸" },
        { type: "transport", tag: "Transport", time: "18:00", title: "è¨ˆç¨‹è»Šå‰å¾€æ©Ÿå ´", desc: "é è¨ˆè»Šç¨‹ç´„ 20 åˆ†é˜ã€‚æº–å‚™é€²è¡Œé è¾¦ç™»æ©Ÿã€‚", emoji: "ğŸš•" },
        { type: "flight", time: "20:30", title: "JX313 æ˜Ÿå®‡èˆªç©º", flightInfo: { from: "OKA é‚£éœ¸", to: "RMQ å°ä¸­", depTime: "20:30", arrTime: "21:15", terminal: "Terminal 1" }, emoji: "âœˆï¸" }
      ]
    }
  ];

  const currentDayData = schedule[activeDay];

  return (
    <div className="min-h-screen font-sans bg-slate-50 pb-12 text-left">
      {/* --- é ‚éƒ¨ Header --- */}
      <div className="relative h-[280px] w-full overflow-hidden">
        <img src={headerImageUrl} alt="æ²–ç¹©èƒŒæ™¯" className="w-full h-full object-cover" loading="eager" />
        <div className="absolute inset-0 bg-gradient-to-t from-slate-900/80 via-slate-900/20 to-transparent" />
        <div className="absolute inset-x-0 bottom-0 p-8">
          <div className="max-w-md mx-auto">
            <div className="inline-block px-3 py-1 bg-teal-500/20 backdrop-blur-md border border-teal-400/30 rounded-full mb-3">
              <span className="text-teal-200 text-[10px] font-black tracking-widest uppercase">2026 February</span>
            </div>
            <h1 className="text-4xl font-black text-white tracking-tighter mb-1">æ²–ç¹©å®¶æ—æ—…è¡Œ</h1>
            <p className="text-slate-300 text-xs font-medium opacity-80 pl-1">Family Adventure in Okinawa</p>
          </div>
        </div>
      </div>

      {/* --- æ—¥æœŸå°èˆªå™¨ --- */}
      <div className="sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/50">
        <div className="max-w-md mx-auto overflow-x-auto no-scrollbar py-4 px-5">
          <div className="flex gap-3 min-w-max">
            {schedule.map((day, index) => (
              <button
                key={index}
                onClick={() => setActiveDay(index)}
                className={`flex flex-col items-center justify-center min-w-[64px] h-16 rounded-2xl transition-all duration-300 ${
                  activeDay === index ? 'bg-teal-600 text-white shadow-lg shadow-teal-600/20 scale-105' : 'bg-white text-slate-400 border border-slate-100 hover:border-slate-300'
                }`}
              >
                <span className="text-[11px] font-black uppercase mb-0.5 opacity-70">D{day.day}</span>
                <span className="text-sm font-black tracking-tighter">{day.navDate}</span>
              </button>
            ))}
          </div>
        </div>
      </div>

      {/* --- ä¸»è¦è¡Œç¨‹å…§å®¹ --- */}
      <main className="max-w-md mx-auto px-6 mt-10">
        <div className="mb-8 animate-fade-in">
          <div className="flex items-center gap-2 mb-2">
            <div className="h-1 w-8 bg-teal-500 rounded-full" />
            <span className="text-teal-600 font-black text-xs tracking-widest uppercase">{currentDayData.location}</span>
          </div>
          <h2 className="text-3xl font-black text-slate-900 mb-3 leading-none tracking-tight">{currentDayData.title}</h2>
          <div className="flex items-center gap-4 text-slate-400">
             <div className="flex items-center gap-1.5 bg-slate-100 px-2 py-1 rounded-lg">
                <Clock size={12} className="text-slate-500" />
                <span className="text-[11px] font-black text-slate-600 uppercase">{currentDayData.date}</span>
             </div>
             <div className="flex items-center gap-1.5 pl-1">
                <MapPin size={12} className="opacity-60" />
                <span className="text-[11px] font-bold">{currentDayData.events.length} STOPS</span>
             </div>
          </div>
        </div>

        {/* å¤©æ°£å€å¡Š */}
        <div className="mb-10 animate-fade-in delay-100">
           <div className="bg-white/40 backdrop-blur-md border border-white/60 rounded-[32px] p-5 shadow-sm overflow-hidden">
              <div className="flex items-center justify-between">
                 <div className="flex items-center gap-3">
                    <div className="p-2 bg-teal-500 rounded-2xl text-white shadow-md shadow-teal-500/20"><CloudSun size={20} /></div>
                    <div>
                       <h4 className="text-[13px] font-black text-slate-800">ä»Šæ—¥å¤©æ°£é æ¸¬</h4>
                       <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">{currentDayData.weather.desc}</p>
                    </div>
                 </div>
                 <div className="text-right">
                    <span className="text-2xl font-black text-slate-800 tracking-tighter">{currentDayData.weather.temp.split(' - ')[1]}</span>
                    <span className="text-[10px] font-bold text-slate-400 block -mt-1 uppercase">Max Temp</span>
                 </div>
              </div>
              <div className="grid grid-cols-2 gap-3 mt-4">
                 <div className="bg-white/60 p-3 rounded-2xl flex items-center gap-2 border border-slate-100/50">
                    <Thermometer size={14} className="text-orange-400" />
                    <span className="text-xs font-bold text-slate-600">{currentDayData.weather.temp}</span>
                 </div>
                 <div className="bg-white/60 p-3 rounded-2xl flex items-center gap-2 border border-slate-100/50">
                    <CloudRain size={14} className="text-blue-400" />
                    <span className="text-xs font-bold text-slate-600">é™é›¨ç‡ {currentDayData.weather.rain}</span>
                 </div>
              </div>
           </div>
        </div>

        {/* æ™‚é–“è»¸å¡ç‰‡ */}
        <div className="space-y-8 relative pb-10">
          <div className="absolute top-10 bottom-0 left-[26px] w-[2px] bg-gradient-to-b from-teal-500/20 via-slate-200 to-transparent" />
          
          {currentDayData.events.map((event, idx) => {
            const style = getTagStyle(event.tag);
            return (
              <div key={idx} className="relative pl-16 group animate-slide-up" style={{ animationDelay: `${idx * 80}ms` }}>
                <div className="absolute left-0 top-0 flex flex-col items-center">
                  <div className={`w-14 h-14 rounded-[22px] bg-white border-2 ${style.border} shadow-sm flex items-center justify-center text-3xl z-10 group-hover:scale-110 transition-transform duration-300`}>
                    {event.emoji}
                  </div>
                  {event.time && (
                    <div className="mt-3 py-0.5 px-2 bg-slate-900 rounded-lg shadow-sm">
                      <span className="text-white font-black text-[9px] whitespace-nowrap uppercase">{event.time}</span>
                    </div>
                  )}
                </div>

                <div className={`bg-white rounded-[32px] p-6 shadow-sm border ${style.border} hover:shadow-xl hover:shadow-slate-200/50 transition-all duration-300`}>
                  {event.tag && (
                    <div className={`inline-flex items-center gap-1.5 mb-2.5 px-2 py-0.5 rounded-full ${style.bg} ${style.text}`}>
                      {style.icon}
                      <span className="text-[10px] font-black tracking-widest uppercase">{event.tag}</span>
                    </div>
                  )}

                  <div className="flex justify-between items-start gap-3 mb-3">
                    <div className="flex-1">
                      <h3 className="font-black text-slate-800 text-lg leading-tight mb-1">{event.title}</h3>
                      {event.type === 'flight' && <span className="text-[10px] font-black text-teal-600 bg-teal-50 px-2 py-0.5 rounded-md uppercase">Flight Info</span>}
                    </div>
                    {event.location && (
                      <button onClick={() => openMap(event.location)} className={`flex-shrink-0 w-10 h-10 rounded-2xl flex items-center justify-center transition-all shadow-sm active:scale-90 ${style.btn}`}>
                        <Navigation size={18} fill="currentColor" strokeWidth={0} />
                      </button>
                    )}
                  </div>

                  {event.flightInfo ? (
                    <div className="mt-4 bg-slate-50 rounded-2xl p-4 border border-slate-100">
                      <div className="flex items-center justify-between mb-4">
                        <div className="text-center flex-1">
                          <p className="text-[10px] font-bold text-slate-400 mb-1 tracking-wider uppercase">DEPART</p>
                          <p className="text-xl font-black text-slate-800">{event.flightInfo.depTime}</p>
                          <p className="text-[11px] font-bold text-slate-600">{event.flightInfo.from}</p>
                        </div>
                        <div className="flex flex-col items-center px-4 relative flex-1">
                          <div className="w-full h-[1px] bg-slate-200 absolute top-1/2 -translate-y-1/2 border-dashed border-b border-slate-300" />
                          <PlaneTakeoff size={16} className="text-teal-500 bg-slate-50 z-10 p-0.5" />
                        </div>
                        <div className="text-center flex-1">
                          <p className="text-[10px] font-bold text-slate-400 mb-1 tracking-wider uppercase">ARRIVE</p>
                          <p className="text-xl font-black text-slate-800">{event.flightInfo.arrTime}</p>
                          <p className="text-[11px] font-bold text-slate-600">{event.flightInfo.to}</p>
                        </div>
                      </div>
                      <div className="text-center pt-3 border-t border-slate-200/60 font-black text-[10px] text-slate-400 tracking-widest">{event.flightInfo.terminal}</div>
                    </div>
                  ) : (
                    event.desc && <p className="text-[13px] text-slate-500 font-medium leading-relaxed mb-2">{event.desc}</p>
                  )}

                  {event.isList && (
                    <div className="grid grid-cols-1 gap-2 mt-4">
                      {event.options.map((opt, oIdx) => (
                        <button key={oIdx} onClick={() => opt.url && openMap(opt.url)} className={`group/btn flex items-center justify-between bg-slate-50 px-4 py-3 rounded-2xl border border-slate-100 transition-all ${opt.url ? 'hover:bg-teal-50 hover:border-teal-200' : ''}`}>
                          <span className="text-xs font-black text-slate-700">{opt.name}</span>
                          {opt.url && <ArrowRight size={12} className="text-slate-300 group-hover/btn:text-teal-500 group-hover/btn:translate-x-1 transition-all" />}
                        </button>
                      ))}
                    </div>
                  )}

                  {event.isCategoryList && (
                    <div className="space-y-4 mt-4">
                      {event.categories.map((cat, cIdx) => (
                        <div key={cIdx}>
                          <h4 className="text-[10px] font-black text-slate-400 mb-2 uppercase tracking-widest ml-1">{cat.name}</h4>
                          <div className="grid grid-cols-1 gap-1.5">
                            {cat.items.map((item, iIdx) => (
                              <button key={iIdx} onClick={() => item.url && openMap(item.url)} className={`group/btn flex items-center justify-between bg-slate-50 px-4 py-2.5 rounded-xl border border-slate-100 transition-all ${item.url ? 'hover:bg-teal-50 hover:border-teal-200' : ''}`}>
                                <span className="text-[11px] font-bold text-slate-700">{item.name}</span>
                                {item.url && <ArrowRight size={10} className="text-slate-300 group-hover/btn:text-teal-500 group-hover/btn:translate-x-1 transition-all" />}
                              </button>
                            ))}
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              </div>
            );
          })}
          <div className="pt-10 text-center animate-bounce"><span className="text-4xl filter grayscale opacity-20">ğŸï¸</span></div>
        </div>
      </main>

      <style dangerouslySetInnerHTML={{ __html: `
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slide-up { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-slide-up { animation: slide-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
      `}} />
    </div>
  );
};

export default TripApp;